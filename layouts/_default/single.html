{{ define "main" }} {{ if eq .Type "writings" }}{{ if not .Params.menu }}
<!-- data-pagefind-XYZ tags allows only certain elements of the blog to be indexed by pagefind -->
<!-- https://gluer.org/blog/adding-a-search-bar-for-hugo-with-pagefind/ -->
<h1 data-pagefind-meta="title">{{ .Title }}</h1>
<!-- ORIGINAL DATE OR LAST UPDATED DATE SECTION -->
<p>
  {{ $dateFormat := default "02 Jan, 2006" .Site.Params.dateFormat }}
  <time
    data-pagefind-meta="date[datetime]"
    datetime='{{ .Lastmod.Format "2006-01-02" }}'
  >
    {{ if ne .Date .Lastmod }} Last updated: {{ .Lastmod.Format $dateFormat }}
    {{ else }} {{ .Date.Format $dateFormat }} {{ end }}
  </time>
</p>

<div class="toc-container">
  <details>
    <summary>Table of Contents</summary>
    {{ .TableOfContents }}
  </details>
</div>
{{ end }}{{ end }}

<!-- CONTENT SECTION -->
<content data-pagefind-body> {{ .Content }} </content>

{{ if eq .Type "writings" }}{{ if (.Param "enablePostNavigator")}} {{- partial
"post_navigator.html" . -}} {{ end }}{{ end }}

<!-- TAGS SECTION -->
<p>
  {{ range (.GetTerms "tags") }}
  <a href="{{ .Permalink }}">#{{ .LinkTitle }}</a>
  {{ end }}
</p>

<!-- ORIGINALLY PUBLISHED DATE SECTION -->
<p>
  {{ $dateFormat := default "02 Jan, 2006" .Site.Params.dateFormat }}
  <time
    data-pagefind-meta="date[datetime]"
    datetime='{{ .Lastmod.Format "2006-01-02" }}'
  >
    {{ if ne .Date .Lastmod }} Originally published: {{ .Date.Format $dateFormat
    }} {{ end }}
  </time>
</p>

<!-- DONATION SECTION -->
{{ if ne .Params.showSupportBlock false }}
<p>Did this post help you?</p>

<a href="https://ko-fi.com/E1E11KTJA6" target="_blank">
  <img
    src="{{ `assets/support_me_on_kofi_dark.png` | relURL }}"
    alt="Support Me On Ko-Fi"
    style="width: 188px; height: auto"
  />
</a>

{{ end }} {{ end }}
